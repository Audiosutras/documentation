
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="The documentation site for my documentation.">
      
      
        <meta name="author" content="Christopher Dixon">
      
      
      
        <link rel="prev" href="../neovim-setup/">
      
      
        <link rel="next" href="../poetry_ci/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.42">
    
    
      
        <title>Pi-hole & Unbound Setup Using Docker Compose - Yea Its Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.0253249f.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="green" data-md-color-accent="light-green">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#pi-hole-unbound-setup-using-docker-compose" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Yea Its Documentation" class="md-header__button md-logo" aria-label="Yea Its Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Yea Its Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Pi-hole &amp; Unbound Setup Using Docker Compose
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Yea Its Documentation" class="md-nav__button md-logo" aria-label="Yea Its Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Yea Its Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Yea its Documentation
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../amazing_lists/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Amazing Lists for Machine Users
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../code_versioning_and_rollbacks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Code Versioning &amp; Rolling Back Main Branch To A Prior State
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../contentful_draft_mode/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Enabling Draft Previews for Contentful Development &amp; Staging Environments
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../docker_cd_github_action/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Github Action to Deploy Dockerfile to Remote Registry
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../extract_tar_files/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Extracting Tar.gz Files
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../gs_classes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Useful Classes for Google AppScript
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../jekyll_github_pages/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hosting Documentation Using Github Pages &amp; Jekyll
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../linux_mint_audio_issues/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    [Solution] Linux Mint Audio Issues
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../linux_mint_nvidia_black_screen/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    [Solution] Linux Mint Black Screen After Login Using Nvidia Drivers
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../neovim-setup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Neovim IDE Setup
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Pi-hole &amp; Unbound Setup Using Docker Compose
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Pi-hole &amp; Unbound Setup Using Docker Compose
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#article-sections" class="md-nav__link">
    <span class="md-ellipsis">
      Article Sections
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#background" class="md-nav__link">
    <span class="md-ellipsis">
      Background
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dns-resolver-cheatsheet" class="md-nav__link">
    <span class="md-ellipsis">
      DNS Resolver CheatSheet
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#download-the-latest-release" class="md-nav__link">
    <span class="md-ellipsis">
      Download The Latest Release
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequiste-installation" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequiste Installation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Prerequiste Installation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#docker-docker-compose" class="md-nav__link">
    <span class="md-ellipsis">
      Docker &amp; Docker Compose
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#direnv" class="md-nav__link">
    <span class="md-ellipsis">
      Direnv
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-pihole-unbound-linuxmac-os" class="md-nav__link">
    <span class="md-ellipsis">
      Running PiHole &amp; Unbound (Linux/Mac OS)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Running PiHole & Unbound (Linux/Mac OS)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#linux-additional-steps" class="md-nav__link">
    <span class="md-ellipsis">
      Linux Additional Steps
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#more-useful-resources-articles" class="md-nav__link">
    <span class="md-ellipsis">
      More Useful Resources &amp; Articles
    </span>
  </a>
  
    <nav class="md-nav" aria-label="More Useful Resources & Articles">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resources" class="md-nav__link">
    <span class="md-ellipsis">
      Resources
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#articles" class="md-nav__link">
    <span class="md-ellipsis">
      Articles
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../poetry_ci/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Python - Poetry CI Github Action
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../pypi_releases/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Github Actions for Releasing Python Packages to PYPI
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../python_poetry_docker/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Python Poetry Docker Examples
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../rar_files/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Extracting Rar files
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../zap-full-scan/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Perform Weekly Security Audits with ZAProxy &amp; Github Actions
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_18" >
        
          
          <label class="md-nav__link" for="__nav_18" id="__nav_18_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Encryption
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_18_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_18">
            <span class="md-nav__icon md-icon"></span>
            Encryption
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../encryption/usb/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    USB Drive Encryption
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#article-sections" class="md-nav__link">
    <span class="md-ellipsis">
      Article Sections
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#background" class="md-nav__link">
    <span class="md-ellipsis">
      Background
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dns-resolver-cheatsheet" class="md-nav__link">
    <span class="md-ellipsis">
      DNS Resolver CheatSheet
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#download-the-latest-release" class="md-nav__link">
    <span class="md-ellipsis">
      Download The Latest Release
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequiste-installation" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequiste Installation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Prerequiste Installation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#docker-docker-compose" class="md-nav__link">
    <span class="md-ellipsis">
      Docker &amp; Docker Compose
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#direnv" class="md-nav__link">
    <span class="md-ellipsis">
      Direnv
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-pihole-unbound-linuxmac-os" class="md-nav__link">
    <span class="md-ellipsis">
      Running PiHole &amp; Unbound (Linux/Mac OS)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Running PiHole & Unbound (Linux/Mac OS)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#linux-additional-steps" class="md-nav__link">
    <span class="md-ellipsis">
      Linux Additional Steps
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#more-useful-resources-articles" class="md-nav__link">
    <span class="md-ellipsis">
      More Useful Resources &amp; Articles
    </span>
  </a>
  
    <nav class="md-nav" aria-label="More Useful Resources & Articles">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resources" class="md-nav__link">
    <span class="md-ellipsis">
      Resources
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#articles" class="md-nav__link">
    <span class="md-ellipsis">
      Articles
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="pi-hole-unbound-setup-using-docker-compose">Pi-hole &amp; Unbound Setup Using Docker Compose</h1>
<h2 id="article-sections">Article Sections</h2>
<ul>
<li><a href="#background">Background</a></li>
<li><a href="#dns-resolver-cheatsheet">DNS Resolver CheatSheet</a></li>
<li><a href="#download-the-latest-release">Download The Latest Release</a></li>
<li><a href="#prerequiste-installation">Prerequiste Installation</a></li>
<li><a href="#docker--docker-compose">Docker &amp; Docker Compose</a></li>
<li><a href="#direnv">Direnv</a></li>
<li><a href="#running-pihole--unbound-linuxmac-os">Running PiHole &amp; Unbound (Linux / Mac OS)</a></li>
<li><a href="#linux-additional-steps">Linux Additional Steps</a></li>
<li><a href="#more-useful-resources--articles">More Useful Resources &amp; Articles</a></li>
<li><a href="#resources">Resources</a></li>
<li><a href="#articles">Articles</a></li>
</ul>
<h2 id="background">Background</h2>
<p><a href="https://docs.pi-hole.net/">Pi-hole</a> is a DNS sinkhole that is effective at blocking ads and malware by closing connections to blacklisted domains before a client can connect to them. <a href="https://nlnetlabs.nl/projects/unbound/about/">Unbound</a> is a validating, recursive, caching DNS resolver that increases the privacy of its users.</p>
<p>This project provisions two docker containers on a user's chosen machine that always run unless stopped; one for Pihole and the other Unbound. When PiHole is configured to use Unbound as its only upstream DNS server it cuts Google, Cloudflare, and other DNS providers out from having a record of the domains you have requested. In simple terms, this means the sites you have visited. However note that your Internet Service Provider will still be able to access your DNS history without any obfuscation. For more information I found <a href="https://www.reddit.com/r/pihole/comments/ydkkup/what_are_the_benefits_to_unbound/">this</a> reddit thread helpful.</p>
<p>The benefits of running pi-hole and unbound in docker containers are many. To speak to a few, it is the ability to run this software across operating system (linux, mac, windows) and across computing devices. You can benefit from adblocking and malware protection on your devices at home by running pihole on a raspberry pi attached to your home network. You can also have this benefit on your machine when connected to an external network like hotel or airport wifi.</p>
<p>Let's get started.</p>
<h2 id="dns-resolver-cheatsheet">DNS Resolver CheatSheet</h2>
<p>The table below documents the port and internal IP address of the custom dns resolvers that this instance of Pihole comes pre-configured with.</p>
<table>
<thead>
<tr>
<th>DNS Resolver</th>
<th>Internal IP Address</th>
</tr>
</thead>
<tbody>
<tr>
<td>Unbound</td>
<td>10.1.1.3#53</td>
</tr>
</tbody>
</table>
<h2 id="download-the-latest-release">Download The Latest Release</h2>
<ul>
<li>Download the <a href="https://github.com/Audiosutras/pihole-dockercompose/releases">latest release</a> (Currently <code>v1.0.3</code>)</li>
</ul>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>-&gt;<span class="w"> </span>wget<span class="w"> </span>https://github.com/Audiosutras/pihole-dockercompose/archive/refs/tags/v1.0.3.tar.gz
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>-&gt;<span class="w"> </span>tar<span class="w"> </span>-xvf<span class="w"> </span>v1.0.3.tar.gz
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>-&gt;<span class="w"> </span>rm<span class="w"> </span>v1.0.3.tar.gz<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">cd</span><span class="w"> </span>pihole-dockercompose-1.0.3
</span></code></pre></div>
<h2 id="prerequiste-installation">Prerequiste Installation</h2>
<h3 id="docker-docker-compose">Docker &amp; Docker Compose</h3>
<p>This project depends on having Docker and Docker Compose installed on the machine
you plan to run Pihole on. Ensure your machine has at least 4GB of RAM.</p>
<p>To check if <code>docker</code> and <code>docker-compose</code> is already installed run the following commands from the command line:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>-&gt;<span class="w"> </span>docker<span class="w"> </span>--version
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>Docker<span class="w"> </span>version<span class="w"> </span><span class="m">24</span>.0.6,<span class="w"> </span>build<span class="w"> </span>ed223bc
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>-&gt;<span class="w"> </span>docker-compose<span class="w"> </span>--version
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>docker-compose<span class="w"> </span>version<span class="w"> </span><span class="m">1</span>.28.0,<span class="w"> </span>build<span class="w"> </span>d02a7b1a
</span></code></pre></div>
<p>If nothing was returned when running the above commands follow docker's recommended installation method found here under <a href="https://docs.docker.com/compose/install/#scenario-one-install-docker-desktop">Scenario one: Install Docker Desktop</a> for your operating system and/or linux distribution. If your machine is a Raspberry Pi or another single board computer check out these operating systems for getting docker up and running</p>
<ul>
<li><a href="https://github.com/IceWhaleTech/CasaOS">Casa OS</a></li>
<li><a href="https://blog.hypriot.com/downloads/">Hypriot OS</a></li>
</ul>
<h3 id="direnv">Direnv</h3>
<p>You can export the environment variables we'll discuss but <a href="https://direnv.net/docs/installation.html">direnv</a> is a great utility to use to have the environment variables automatically exported for you when this project is in your working directory.</p>
<p>For ubuntu-based systems:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>apt<span class="w"> </span>install<span class="w"> </span>direnv
</span></code></pre></div>
<p>Via homebrew:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>brew<span class="w"> </span>install<span class="w"> </span>direnv
</span></code></pre></div>
<p>You may need to re-open your terminal shell here. Now let's configure our shell.</p>
<p>For bash:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;eval &quot;$(direnv hook bash)&quot;&#39;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>~/.bashrc
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="nb">source</span><span class="w"> </span>~/.bashrc
</span></code></pre></div>
<p>For zsh:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;eval &quot;$(direnv hook zsh)&quot;&#39;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>~/.zshrc
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="nb">source</span><span class="w"> </span>~/.zshrc
</span></code></pre></div>
<h2 id="running-pihole-unbound-linuxmac-os">Running PiHole &amp; Unbound (Linux/Mac OS)</h2>
<ul>
<li>
<p><a href="#download-the-latest-release">Download the latest release</a></p>
</li>
<li>
<p>Create an <code>.envrc</code> file in the same directory as the <code>docker-compose.yml</code> file</p>
</li>
</ul>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>-&gt;<span class="w"> </span>ls
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>docker-compose.yml<span class="w">  </span>READMe.md
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>-&gt;<span class="w"> </span>touch<span class="w"> </span>.envrc<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>vim<span class="w"> </span>.envrc<span class="w"> </span><span class="c1"># opens vim editor</span>
</span></code></pre></div>
<p>Copy &amp; Paste the code block below into the <code>vim editor</code>.</p>
<ul>
<li>Replace <code>&lt;super secret password for logging into pihole dashboard&gt;</code> with your password.</li>
<li>Replace <code>&lt;timezone&gt;</code> with your timezone. For example <code>America/New_York</code></li>
<li>Replace <code>&lt;dns addresses&gt;</code> with the upstream dns you would like to use. If you would like to use <code>Unbound</code> write <code>'10.1.1.3#53'</code> or if you would like to use <code>Cloudflare</code> and <code>Quad 9</code> write <code>'1.1.1.1;9.9.9.9'</code> for example. There are more options available in the pihole admin than this. This just selects the default upstream providers that will be checked in the admin on system start.</li>
</ul>
<div class="language-text highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>export PIHOLE_PWD=&lt;super secret password for logging into pihole dashboard&gt;
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a># Switch With your local TimeZone, ex: export PIHOLE_TZ=America/New_York
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>export PIHOLE_TZ=&lt;timezone&gt;
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>export PIHOLE_DNS=&lt;dns addresses&gt;
</span></code></pre></div>
<p><code>:wq</code> then <code>ENTER</code> to exit the vim editor.</p>
<p>Now allow <code>direnv</code> to automatically export environment variables by running:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>direnv<span class="w"> </span>allow<span class="w"> </span>.
</span></code></pre></div>
<p>Each time changes are made to the <code>.envrc</code> file this command will need to be run.</p>
<ol>
<li>Run the project detached as a background process.</li>
</ol>
<p>If you are running this project on Ubuntu (and maybe Fedora) there are <a href="#ubuntu-additional-steps">additional steps</a> that need to be completed before continuing with step 2.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>-&gt;<span class="w"> </span>docker-compose<span class="w"> </span>up<span class="w"> </span>-d
</span></code></pre></div>
<p>Pihole and Unbound will restart automatically unless explicitly stopped by the user.</p>
<p>If you are running this project on a raspberry pi or a device using the arm64 architecture and you plan on using unbound, you will need to modify the <code>unbound.image</code> value in the <code>docker-compose.yml</code> file. Change <code>mvance/unbound:latest</code> to <code>mvance/unbound-rpi:latest</code>. Save the file and then run <code>docker-compose up -d</code>.</p>
<ol>
<li>
<p>Get the IP Address of the Pihole instance</p>
</li>
<li>
<p>If wanting to use Pihole on the machine you just installed it on without local
     network coverage, the IP address you will use for your DNS server is <code>127.0.0.1</code> (localhost).</p>
</li>
<li>For local network coverage, you will need to know the local IP address for the machine you placed Pihole on. Get that on linux by running</li>
</ol>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="w">    </span><span class="c1"># make sure to write down the first entry in this list</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>-&gt;<span class="w"> </span>hostname<span class="w"> </span>-I
</span></code></pre></div>
<p><strong>Note</strong>: The machine you placed pihole on would benefit from having a <a href="https://www.tomshardware.com/how-to/static-ip-raspberry-pi">static IP address</a></p>
<ol>
<li>
<p>Confirm PiHole is the selected upstream DNS servers selected in Step 1</p>
</li>
<li>
<p>Navigate to <code>http://&lt;ip-address&gt;/admin</code> replacing <code>&lt;ip-address&gt;</code> with the address you obtained in step 3. If <code>127.0.0.1</code> append the port as so: <code>http://127.0.0.1:8080/admin</code></p>
</li>
<li>Input the <code>PIHOLE_PWD</code> password you chose in step 1 to access the admin</li>
<li>Navigate to <code>Settings</code>, click on the <code>DNS</code> tab. Under <code>Upstream DNS</code> <code>Custom 1 (IPv4)</code> you should see checked <code>10.1.1.3#53</code>. This is <code>Unbound</code>'s internal IP address.</li>
<li>You can uncheck this and use any of the other upstream dns servers like <code>Cloudflare</code> and <code>Quad9</code> whenever you want to.</li>
<li>
<p><em>Note</em> Unbound being checked is contigent upon what upsteam dns providers you selected for <code>PIHOLE_DNS</code> in Step 1. If you chose <code>"1.1.1.1;9.9.9.9"</code> you will see <code>Cloudflare</code> and <code>Quad 9</code> checked.</p>
</li>
<li>
<p>Start using Pihole - <a href="https://discourse.pi-hole.net/t/how-do-i-configure-my-devices-to-use-pi-hole-as-their-dns-server/245">Article: Configure Clients to use Pihole</a></p>
</li>
<li>
<p>On the Pihole installed machine you can navigate to Wifi or Network Settings and update the <code>DNS</code> section for your internet connection by inputing <code>127.0.0.1</code> as the value for this section.</p>
</li>
<li>For local network coverage of all devices you will need to update Static DNS settings found in your router's admin page. You will set
     the DNS value to the local IP address you retrieved in step 3.</li>
</ol>
<p>For more Information see the article linked above for step 5.</p>
<h3 id="linux-additional-steps">Linux Additional Steps</h3>
<p>In order to proceed you will need to update <code>systemd-resolved</code> or disable it.</p>
<ul>
<li>
<p><a href="https://github.com/pi-hole/docker-pi-hole/#installing-on-ubuntu-or-fedora">Offical Pihole Solution for Ubuntu &amp; Fedora - Update It</a></p>
</li>
<li>
<p><a href="https://askubuntu.com/questions/907246/how-to-disable-systemd-resolved-in-ubuntu">The Unoffical Solution for the Streets - Disable It</a>.</p>
</li>
</ul>
<p>Here are the steps for the official solution</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>-&gt;<span class="w"> </span>sudo<span class="w"> </span>sed<span class="w"> </span>-r<span class="w"> </span>-i.orig<span class="w"> </span><span class="s1">&#39;s/#?DNSStubListener=yes/DNSStubListener=no/g&#39;</span><span class="w"> </span>/etc/systemd/resolved.conf
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>-&gt;<span class="w"> </span>sudo<span class="w"> </span>sh<span class="w"> </span>-c<span class="w"> </span><span class="s1">&#39;rm /etc/resolv.conf &amp;&amp; ln -s /run/systemd/resolve/resolv.conf&#39;</span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>-&gt;<span class="w"> </span>sudo<span class="w"> </span>systemctl<span class="w"> </span>restart<span class="w"> </span>systemd-resolved
</span></code></pre></div>
<p>Here are the steps for the unofficial solution</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="w">    </span><span class="c1"># The Unoffical Solution for the Streets</span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>-&gt;<span class="w"> </span>sudo<span class="w"> </span>systemctl<span class="w"> </span>disable<span class="w"> </span>systemd-resolved
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>-&gt;<span class="w"> </span>sudo<span class="w"> </span>systemctl<span class="w"> </span>stop<span class="w"> </span>systemd-resolved
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a>-&gt;<span class="w"> </span>sudo<span class="w"> </span>nano<span class="w"> </span>/etc/NetworkManager/NetworkManager.conf
</span></code></pre></div>
<p>Add <code>dns=default</code> under <code>[main]</code> section in <code>/etc/NetworkManager/NetworkManager.conf</code></p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="c1"># inside &#39;/etc/NetworkManager/NetworkManager.conf&#39;</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="o">[</span>main<span class="o">]</span>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a>...
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a>...
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a><span class="nv">dns</span><span class="o">=</span>default
</span><span id="__span-13-6"><a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a>...
</span></code></pre></div>
<p><code>:wq</code> then <code>ENTER</code> to exit the vim editor.</p>
<p>Delete the sysmlink <code>/etc/resolv.conf</code></p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>-&gt;<span class="w"> </span>rm<span class="w"> </span>/etc/resolv.conf
</span></code></pre></div>
<p>Restart NetworkManager</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>-&gt;<span class="w"> </span>sudo<span class="w"> </span>systemctl<span class="w"> </span>restart<span class="w"> </span>NetworkManager
</span></code></pre></div>
<p>Now we can proceed back to step 2 in <a href="#running-pihole--unbound-linuxmac-os">Running PiHole &amp; Unbound</a>.</p>
<h2 id="more-useful-resources-articles">More Useful Resources &amp; Articles</h2>
<h3 id="resources">Resources</h3>
<ul>
<li><a href="https://pi-hole.net/">Pi-hole website</a></li>
<li><a href="https://github.com/pi-hole/docker-pi-hole/#running-pi-hole-docker">Setup Pihole Docker (Official)</a></li>
<li><a href="https://nlnetlabs.nl/projects/unbound/about/">Unbound as an Upstream DNS</a></li>
</ul>
<h3 id="articles">Articles</h3>
<ul>
<li><a href="https://pimylifeup.com/pi-hole-docker/">PiHole Docker - Pi My Life UP</a></li>
<li><a href="https://thanosmour-tk.medium.com/run-pi-hole-in-localhost-and-some-extras-4b50e76611e6">Run PI Hole In Localhost And Some Extras - Medium</a></li>
<li><a href="https://www.reddit.com/r/docker/comments/rbgrm8/how_to_install_unbound_and_pihole_in_docker_using/">How To Install Unbound and Pi-hole in Docker using Docker Compose</a></li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      GNU GPL v3 License
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["content.code.copy", "search.suggest", "search.share"], "search": "../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.83f73b43.min.js"></script>
      
    
  </body>
</html>